# 穿搭分析和推荐系统使用指南

## 功能概述

这个系统将原有的Bocha搜索功能改造为专属个人衣服穿搭推荐系统，提供以下核心功能：

1. **拍照分析当前穿搭** - 使用AI分析用户当前的服装搭配
2. **智能推荐配套衣物** - 基于分析结果搜索推荐配套服装
3. **个性化穿搭建议** - 提供风格、颜色和搭配建议

## 系统架构

### 核心模块

1. **OutfitAnalyzer** (`outfit_analyzer.cc/h`)
   - 穿搭分析主控制器
   - 整合拍照和搜索功能
   - 提供完整的穿搭服务流程

2. **BochaSearch** (增强版 `bocha_search.cc/h`)
   - 原有通用搜索功能保持不变
   - 新增专门的服装搜索工具 `self.search.outfit`
   - 智能优化服装相关搜索查询

3. **Camera Integration**
   - 利用现有的相机拍照和AI分析功能
   - 专门针对穿搭分析优化问题构建

## MCP工具列表

### 1. 穿搭分析工具
**工具名称**: `self.outfit.analyze`
**功能**: 拍照分析当前穿搭风格、颜色搭配和服装单品
**参数**: 无
**返回**: 详细的穿搭分析报告

```json
{
  "success": true,
  "overall_style": "休闲",
  "color_scheme": "黑色+白色",
  "season": "四季",
  "occasion": "日常",
  "items": ["T恤", "牛仔裤", "运动鞋"],
  "style_suggestions": ["可以加一些配饰增加层次感"]
}
```

### 2. 服装推荐工具
**工具名称**: `self.outfit.recommend`
**功能**: 基于当前穿搭分析结果，搜索并推荐配套的衣物单品
**参数**: 
- `analysis_result` (可选): 穿搭分析结果

**返回**: 推荐的衣物列表和购买链接

```json
{
  "success": true,
  "style_advice": "基于您当前的休闲风格穿搭分析...",
  "color_advice": "建议保持与当前黑色+白色的协调搭配",
  "recommended_items": [
    {
      "title": "休闲牛仔外套",
      "link": "https://example.com/jacket",
      "snippet": "经典休闲款式，适合搭配T恤",
      "price": "¥299",
      "site_name": "时尚商城"
    }
  ]
}
```

### 3. 完整穿搭服务
**工具名称**: `self.outfit.complete_service`
**功能**: 提供完整的穿搭服务：拍照分析当前穿搭并推荐配套衣物
**参数**: 无
**返回**: 穿搭分析 + 推荐衣物的完整报告

这是最常用的功能，一次性完成穿搭分析和推荐。

### 4. 专门的服装搜索工具
**工具名称**: `self.search.outfit`
**功能**: 专门用于服装穿搭的智能搜索
**参数**:
- `style`: 服装风格(如休闲、正式、运动、时尚等)
- `colors`: 颜色搭配(如黑色、白色、蓝色等)
- `season`: 适合季节(春夏秋冬)
- `item_type`: 服装类型(如上衣、裤子、鞋子、配饰等)
- `count`: 返回结果数量(1-4, 默认3)

## 使用场景

### 场景1: 用户寻求穿搭建议
**用户说**: "帮我看看今天的穿搭怎么样"
**AI调用**: `self.outfit.complete_service`
**流程**:
1. 拍照分析当前穿搭
2. 提供风格评价和改进建议
3. 推荐配套衣物

### 场景2: 寻找特定风格服装
**用户说**: "我想买一些正式风格的白色衬衫"
**AI调用**: `self.search.outfit`
**参数**: 
```json
{
  "style": "正式",
  "colors": "白色",
  "item_type": "衬衫",
  "count": 3
}
```

### 场景3: 基于现有穿搭推荐配套
**用户说**: "这身衣服配什么外套好看"
**AI调用**: `self.outfit.recommend`
**流程**:
1. 先分析当前穿搭(如果没有现成分析结果)
2. 基于风格和颜色推荐配套外套

## 技术特性

### 智能查询优化
- 服装搜索会自动添加购物相关关键词
- 针对不同风格优化搜索策略
- 支持季节性和场合性搜索

### 增强结果解析
- 自动提取价格信息
- 识别品牌信息
- 检测服装类型
- 计算推荐相关性评分

### 个性化建议
- 基于分析结果生成风格建议
- 考虑颜色协调性
- 提供搭配层次感建议

## 数据流程图

```
用户请求
    ↓
拍照 → AI分析穿搭 → 提取风格/颜色/单品信息
    ↓
构建搜索查询 → Bocha AI搜索 → 解析服装结果
    ↓
生成推荐报告 → 返回给用户
```

## 扩展可能性

1. **用户偏好学习**: 可以记录用户的穿搭偏好，提供更个性化的推荐
2. **季节性推荐**: 根据当前季节和天气推荐合适的服装
3. **预算控制**: 可以在搜索中加入价格范围过滤
4. **品牌偏好**: 支持特定品牌的搜索和推荐
5. **场合匹配**: 根据不同场合(工作、约会、运动等)推荐合适穿搭

## 注意事项

1. 确保设备有摄像头功能
2. 需要网络连接进行AI分析和搜索
3. 相机的explain_url和token需要正确配置
4. Bocha AI的API密钥需要有效

这个系统将原有的通用搜索功能成功改造为专门的穿搭推荐系统，为用户提供了完整的个人穿搭顾问服务。
